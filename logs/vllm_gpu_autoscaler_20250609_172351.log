2025-06-09 17:23:51,527 [[32mINFO[0m] __main__: 🚀 vLLM GPU自适应调频系统
2025-06-09 17:23:51,527 [[32mINFO[0m] __main__: 📅 启动时间: 2025-06-09 17:23:51
2025-06-09 17:23:51,527 [[32mINFO[0m] __main__: 📝 配置文件: config/config.yaml
2025-06-09 17:23:51,528 [[32mINFO[0m] __main__: 🤖 模型选项: 重置
2025-06-09 17:23:51,528 [[32mINFO[0m] __main__: ============================================================
2025-06-09 17:23:51,538 [[32mINFO[0m] __main__: 🚀 vLLM GPU自适应调频系统 v1.0
2025-06-09 17:23:51,538 [[32mINFO[0m] __main__: ============================================================
2025-06-09 17:23:51,541 [[32mINFO[0m] __main__: 🔧 初始化系统组件...
2025-06-09 17:23:51,730 [[32mINFO[0m] __main__: 🔄 重置模型，从头开始学习
2025-06-09 17:23:51,731 [[32mINFO[0m] __main__: ✅ 系统初始化完成
2025-06-09 17:23:51,731 [[32mINFO[0m] __main__: 📋 配置摘要:
2025-06-09 17:23:51,731 [[32mINFO[0m] __main__:    - GPU设备: 0
2025-06-09 17:23:51,732 [[32mINFO[0m] __main__:    - 频率范围: 1005-2100MHz
2025-06-09 17:23:51,732 [[32mINFO[0m] __main__:    - 频率档位: 27个
2025-06-09 17:23:51,732 [[32mINFO[0m] __main__:    - 决策间隔: 2.0秒
2025-06-09 17:23:51,732 [[32mINFO[0m] __main__:    - TTFT限制: 200.0秒
2025-06-09 17:23:51,732 [[32mINFO[0m] __main__:    - TPOT限制: 5秒
2025-06-09 17:23:51,732 [[32mINFO[0m] __main__:    - 初始探索率: 3.0
2025-06-09 17:23:51,732 [[32mINFO[0m] __main__: 
============================================================
2025-06-09 17:23:51,732 [[32mINFO[0m] __main__: 🎮 开始自适应GPU调频控制
2025-06-09 17:23:51,732 [[32mINFO[0m] __main__: ============================================================

2025-06-09 17:23:51,732 [[32mINFO[0m] __main__: 
──────────────────── 迭代 1 ────────────────────
2025-06-09 17:23:51,732 [[32mINFO[0m] __main__: 📊 [阶段1/5] 采集系统状态...
2025-06-09 17:23:55,857 [[32mINFO[0m] __main__: 🔍 [阶段2/5] 提取特征...
2025-06-09 17:23:55,858 [[32mINFO[0m] __main__:    队列状态: 无等待
2025-06-09 17:23:55,859 [[32mINFO[0m] __main__:    并发请求: 0
2025-06-09 17:23:55,859 [[32mINFO[0m] __main__:    GPU缓存: 0.0%
2025-06-09 17:23:55,859 [[32mINFO[0m] __main__: 😴 系统完全空闲，切换到最低功耗模式 (210MHz)
2025-06-09 17:23:55,859 [[32mINFO[0m] __main__: ⚡ [阶段3/5] 紧急决策: 动作0
2025-06-09 17:23:55,860 [[32mINFO[0m] __main__: 📉 [阶段4/5] 调整频率: 1005MHz → 210MHz (-795MHz)
2025-06-09 17:23:55,917 [[32mINFO[0m] __main__: ⏳ 等待2.0秒观察效果...
2025-06-09 17:23:57,917 [[32mINFO[0m] __main__: 📊 [阶段5/5] 评估效果...
2025-06-09 17:24:02,117 [[32mINFO[0m] __main__: 
┌──────────────────────────────────────────────────────────┐
│ 📊 状态汇总 - 迭代 1                                         │
├──────────────────────────────────────────────────────────┤
│ 🔧 频率: 1005MHz ↓ 210 MHz (-795MHz)               │
│ 👥 请求: 运行 0→0, 等待 0→0                        │
│ 💾 缓存:   0.0% → 0.0  %                                │
│ ⚡ 能耗:  264.5J,  EDP: 0.000000                    │
│ 🟡 奖励:   -3.408                                     │
│ 🌡️  GPU: 39°C, 0%, 25W                        │
│ 🤖 模型: α=1.63, 总轮次=0, 平均奖励=0.000         │
└──────────────────────────────────────────────────────────┘
2025-06-09 17:24:02,118 [[33mWARNING[0m] __main__: ⚠️ 循环耗时过长: 10.4秒
2025-06-09 17:24:02,119 [[32mINFO[0m] __main__: 
──────────────────── 迭代 2 ────────────────────
2025-06-09 17:24:02,121 [[32mINFO[0m] __main__: 📊 [阶段1/5] 采集系统状态...
2025-06-09 17:24:06,238 [[32mINFO[0m] __main__: 🔍 [阶段2/5] 提取特征...
2025-06-09 17:24:06,238 [[32mINFO[0m] __main__:    队列状态: 无等待
2025-06-09 17:24:06,240 [[32mINFO[0m] __main__:    并发请求: 0
2025-06-09 17:24:06,240 [[32mINFO[0m] __main__:    GPU缓存: 0.0%
2025-06-09 17:24:06,240 [[32mINFO[0m] __main__: 😴 系统完全空闲，切换到最低功耗模式 (210MHz)
2025-06-09 17:24:06,240 [[32mINFO[0m] __main__: ⚡ [阶段3/5] 紧急决策: 动作0
2025-06-09 17:24:06,240 [[32mINFO[0m] __main__: ✅ [阶段4/5] 保持频率: 210MHz
2025-06-09 17:24:06,240 [[32mINFO[0m] __main__: ⏳ 等待2.0秒观察效果...
2025-06-09 17:24:08,240 [[32mINFO[0m] __main__: 📊 [阶段5/5] 评估效果...
2025-06-09 17:24:12,420 [[32mINFO[0m] __main__: 
┌──────────────────────────────────────────────────────────┐
│ 📊 状态汇总 - 迭代 2                                         │
├──────────────────────────────────────────────────────────┤
│ 🔧 频率:  210MHz → 210 MHz (+0MHz)               │
│ 👥 请求: 运行 0→0, 等待 0→0                        │
│ 💾 缓存:   0.0% → 0.0  %                                │
│ ⚡ 能耗:  243.6J,  EDP: 0.000000                    │
│ 🟡 奖励:   -3.061                                     │
│ 🌡️  GPU: 39°C, 0%, 25W                        │
│ 🤖 模型: α=1.63, 总轮次=0, 平均奖励=0.000         │
└──────────────────────────────────────────────────────────┘
2025-06-09 17:24:12,420 [[33mWARNING[0m] __main__: ⚠️ 循环耗时过长: 10.3秒
2025-06-09 17:24:12,420 [[32mINFO[0m] __main__: 
──────────────────── 迭代 3 ────────────────────
2025-06-09 17:24:12,422 [[32mINFO[0m] __main__: 📊 [阶段1/5] 采集系统状态...
2025-06-09 17:24:16,537 [[32mINFO[0m] __main__: 🔍 [阶段2/5] 提取特征...
2025-06-09 17:24:16,538 [[32mINFO[0m] __main__:    队列状态: 无等待
2025-06-09 17:24:16,538 [[32mINFO[0m] __main__:    并发请求: 0
2025-06-09 17:24:16,538 [[32mINFO[0m] __main__:    GPU缓存: 0.0%
2025-06-09 17:24:16,539 [[32mINFO[0m] __main__: 😴 系统完全空闲，切换到最低功耗模式 (210MHz)
2025-06-09 17:24:16,540 [[32mINFO[0m] __main__: ⚡ [阶段3/5] 紧急决策: 动作0
2025-06-09 17:24:16,540 [[32mINFO[0m] __main__: ✅ [阶段4/5] 保持频率: 210MHz
2025-06-09 17:24:16,540 [[32mINFO[0m] __main__: ⏳ 等待2.0秒观察效果...
2025-06-09 17:24:18,540 [[32mINFO[0m] __main__: 📊 [阶段5/5] 评估效果...
2025-06-09 17:24:22,716 [[32mINFO[0m] __main__: 
┌──────────────────────────────────────────────────────────┐
│ 📊 状态汇总 - 迭代 3                                         │
├──────────────────────────────────────────────────────────┤
│ 🔧 频率:  210MHz → 210 MHz (+0MHz)               │
│ 👥 请求: 运行 0→0, 等待 0→0                        │
│ 💾 缓存:   0.0% → 0.0  %                                │
│ ⚡ 能耗:  245.0J,  EDP: 0.000000                    │
│ 🟡 奖励:   -3.083                                     │
│ 🌡️  GPU: 39°C, 0%, 25W                        │
│ 🤖 模型: α=1.63, 总轮次=0, 平均奖励=0.000         │
└──────────────────────────────────────────────────────────┘
2025-06-09 17:24:22,716 [[33mWARNING[0m] __main__: ⚠️ 循环耗时过长: 10.3秒
2025-06-09 17:24:22,718 [[32mINFO[0m] __main__: 
──────────────────── 迭代 4 ────────────────────
2025-06-09 17:24:22,719 [[32mINFO[0m] __main__: 📊 [阶段1/5] 采集系统状态...
2025-06-09 17:24:26,836 [[32mINFO[0m] __main__: 🔍 [阶段2/5] 提取特征...
2025-06-09 17:24:26,837 [[32mINFO[0m] __main__:    队列状态: 无等待
2025-06-09 17:24:26,837 [[32mINFO[0m] __main__:    并发请求: 0
2025-06-09 17:24:26,838 [[32mINFO[0m] __main__:    GPU缓存: 0.0%
2025-06-09 17:24:26,838 [[32mINFO[0m] __main__: 😴 系统完全空闲，切换到最低功耗模式 (210MHz)
2025-06-09 17:24:26,838 [[32mINFO[0m] __main__: ⚡ [阶段3/5] 紧急决策: 动作0
2025-06-09 17:24:26,839 [[32mINFO[0m] __main__: ✅ [阶段4/5] 保持频率: 210MHz
2025-06-09 17:24:26,839 [[32mINFO[0m] __main__: ⏳ 等待2.0秒观察效果...
2025-06-09 17:24:28,839 [[32mINFO[0m] __main__: 📊 [阶段5/5] 评估效果...
2025-06-09 17:24:33,035 [[32mINFO[0m] __main__: 
┌──────────────────────────────────────────────────────────┐
│ 📊 状态汇总 - 迭代 4                                         │
├──────────────────────────────────────────────────────────┤
│ 🔧 频率:  210MHz → 210 MHz (+0MHz)               │
│ 👥 请求: 运行 0→0, 等待 0→0                        │
│ 💾 缓存:   0.0% → 0.0  %                                │
│ ⚡ 能耗:  241.1J,  EDP: 0.000000                    │
│ 🟡 奖励:   -3.018                                     │
│ 🌡️  GPU: 39°C, 0%, 25W                        │
│ 🤖 模型: α=1.63, 总轮次=0, 平均奖励=0.000         │
└──────────────────────────────────────────────────────────┘
2025-06-09 17:24:33,035 [[33mWARNING[0m] __main__: ⚠️ 循环耗时过长: 10.3秒
2025-06-09 17:24:33,035 [[32mINFO[0m] __main__: 
──────────────────── 迭代 5 ────────────────────
2025-06-09 17:24:33,036 [[32mINFO[0m] __main__: 📊 [阶段1/5] 采集系统状态...
2025-06-09 17:24:37,139 [[32mINFO[0m] __main__: 🔍 [阶段2/5] 提取特征...
2025-06-09 17:24:37,139 [[32mINFO[0m] __main__:    队列状态: 无等待
2025-06-09 17:24:37,155 [[32mINFO[0m] __main__:    并发请求: 0
2025-06-09 17:24:37,155 [[32mINFO[0m] __main__:    GPU缓存: 0.0%
2025-06-09 17:24:37,155 [[32mINFO[0m] __main__: 😴 系统完全空闲，切换到最低功耗模式 (210MHz)
2025-06-09 17:24:37,156 [[32mINFO[0m] __main__: ⚡ [阶段3/5] 紧急决策: 动作0
2025-06-09 17:24:37,156 [[32mINFO[0m] __main__: ✅ [阶段4/5] 保持频率: 210MHz
2025-06-09 17:24:37,156 [[32mINFO[0m] __main__: ⏳ 等待2.0秒观察效果...
2025-06-09 17:24:39,157 [[32mINFO[0m] __main__: 📊 [阶段5/5] 评估效果...
2025-06-09 17:24:43,323 [[32mINFO[0m] __main__: 
┌──────────────────────────────────────────────────────────┐
│ 📊 状态汇总 - 迭代 5                                         │
├──────────────────────────────────────────────────────────┤
│ 🔧 频率:  210MHz → 210 MHz (+0MHz)               │
│ 👥 请求: 运行 0→9, 等待 0→0                        │
│ 💾 缓存:   0.0% → 1.6  %                                │
│ ⚡ 能耗:    0.0J,  EDP: 0.000000                    │
│ 🟡 奖励:    0.000                                     │
│ 🌡️  GPU: 42°C, 100%, 85W                        │
│ 🤖 模型: α=1.63, 总轮次=0, 平均奖励=0.000         │
└──────────────────────────────────────────────────────────┘
2025-06-09 17:24:43,323 [[33mWARNING[0m] __main__: ⚠️ 循环耗时过长: 10.3秒
2025-06-09 17:24:43,326 [[32mINFO[0m] __main__: 
──────────────────── 迭代 6 ────────────────────
2025-06-09 17:24:43,327 [[32mINFO[0m] __main__: 📊 [阶段1/5] 采集系统状态...
2025-06-09 17:24:47,436 [[32mINFO[0m] __main__: 🔍 [阶段2/5] 提取特征...
2025-06-09 17:24:47,436 [[32mINFO[0m] __main__:    队列状态: 无等待
2025-06-09 17:24:47,438 [[32mINFO[0m] __main__:    并发请求: 27
2025-06-09 17:24:47,438 [[32mINFO[0m] __main__:    GPU缓存: 0.1%
2025-06-09 17:24:47,486 [[31mERROR[0m] __main__: ❌ 迭代错误 (1): operands could not be broadcast together with shapes (10,10) (9,9) 
Traceback (most recent call last):
  File "/home/ldaphome/colin/workplace/vllm_mab/src/main.py", line 238, in run
    linucb_action = self.linucb.select_action(norm_features)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ldaphome/colin/workplace/vllm_mab/src/linucb.py", line 55, in select_action
    A_reg = self.A[a] + self.lambda_reg * np.eye(self.n_features)
            ~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ValueError: operands could not be broadcast together with shapes (10,10) (9,9) 
2025-06-09 17:24:47,489 [[32mINFO[0m] __main__: 等待2.0秒后重试...
2025-06-09 17:24:49,491 [[33mWARNING[0m] __main__: ⚠️ 循环耗时过长: 6.2秒
2025-06-09 17:24:49,491 [[32mINFO[0m] __main__: 
──────────────────── 迭代 7 ────────────────────
2025-06-09 17:24:49,491 [[32mINFO[0m] __main__: 📊 [阶段1/5] 采集系统状态...
2025-06-09 17:24:53,605 [[32mINFO[0m] __main__: 🔍 [阶段2/5] 提取特征...
2025-06-09 17:24:53,606 [[32mINFO[0m] __main__:    队列状态: 有等待
2025-06-09 17:24:53,606 [[32mINFO[0m] __main__:    并发请求: 75
2025-06-09 17:24:53,606 [[32mINFO[0m] __main__:    GPU缓存: 0.1%
2025-06-09 17:24:53,718 [[31mERROR[0m] __main__: ❌ 迭代错误 (2): operands could not be broadcast together with shapes (10,10) (9,9) 
Traceback (most recent call last):
  File "/home/ldaphome/colin/workplace/vllm_mab/src/main.py", line 238, in run
    linucb_action = self.linucb.select_action(norm_features)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ldaphome/colin/workplace/vllm_mab/src/linucb.py", line 55, in select_action
    A_reg = self.A[a] + self.lambda_reg * np.eye(self.n_features)
            ~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ValueError: operands could not be broadcast together with shapes (10,10) (9,9) 
2025-06-09 17:24:53,719 [[32mINFO[0m] __main__: 等待2.0秒后重试...
2025-06-09 17:24:55,721 [[33mWARNING[0m] __main__: ⚠️ 循环耗时过长: 6.2秒
2025-06-09 17:24:55,722 [[32mINFO[0m] __main__: 
──────────────────── 迭代 8 ────────────────────
2025-06-09 17:24:55,722 [[32mINFO[0m] __main__: 📊 [阶段1/5] 采集系统状态...
2025-06-09 17:24:59,841 [[32mINFO[0m] __main__: 🔍 [阶段2/5] 提取特征...
2025-06-09 17:24:59,841 [[32mINFO[0m] __main__:    队列状态: 有等待
2025-06-09 17:24:59,845 [[32mINFO[0m] __main__:    并发请求: 105
2025-06-09 17:24:59,845 [[32mINFO[0m] __main__:    GPU缓存: 0.2%
2025-06-09 17:24:59,916 [[31mERROR[0m] __main__: ❌ 迭代错误 (3): operands could not be broadcast together with shapes (10,10) (9,9) 
Traceback (most recent call last):
  File "/home/ldaphome/colin/workplace/vllm_mab/src/main.py", line 238, in run
    linucb_action = self.linucb.select_action(norm_features)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ldaphome/colin/workplace/vllm_mab/src/linucb.py", line 55, in select_action
    A_reg = self.A[a] + self.lambda_reg * np.eye(self.n_features)
            ~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ValueError: operands could not be broadcast together with shapes (10,10) (9,9) 
2025-06-09 17:24:59,917 [[32mINFO[0m] __main__: 等待2.0秒后重试...
2025-06-09 17:25:01,917 [[33mWARNING[0m] __main__: ⚠️ 循环耗时过长: 6.2秒
2025-06-09 17:25:01,917 [[32mINFO[0m] __main__: 
──────────────────── 迭代 9 ────────────────────
2025-06-09 17:25:01,918 [[32mINFO[0m] __main__: 📊 [阶段1/5] 采集系统状态...
2025-06-09 17:25:06,034 [[32mINFO[0m] __main__: 🔍 [阶段2/5] 提取特征...
2025-06-09 17:25:06,035 [[32mINFO[0m] __main__:    队列状态: 有等待
2025-06-09 17:25:06,037 [[32mINFO[0m] __main__:    并发请求: 155
2025-06-09 17:25:06,037 [[32mINFO[0m] __main__:    GPU缓存: 0.2%
2025-06-09 17:25:06,112 [[31mERROR[0m] __main__: ❌ 迭代错误 (4): operands could not be broadcast together with shapes (10,10) (9,9) 
Traceback (most recent call last):
  File "/home/ldaphome/colin/workplace/vllm_mab/src/main.py", line 238, in run
    linucb_action = self.linucb.select_action(norm_features)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ldaphome/colin/workplace/vllm_mab/src/linucb.py", line 55, in select_action
    A_reg = self.A[a] + self.lambda_reg * np.eye(self.n_features)
            ~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ValueError: operands could not be broadcast together with shapes (10,10) (9,9) 
2025-06-09 17:25:06,113 [[32mINFO[0m] __main__: 等待2.0秒后重试...
2025-06-09 17:25:08,115 [[33mWARNING[0m] __main__: ⚠️ 循环耗时过长: 6.2秒
2025-06-09 17:25:08,116 [[32mINFO[0m] __main__: 
==================== 🎯 迭代 10 ====================
2025-06-09 17:25:08,116 [[32mINFO[0m] __main__: 📊 [阶段1/5] 采集系统状态...
2025-06-09 17:25:12,248 [[32mINFO[0m] __main__: 🔍 [阶段2/5] 提取特征...
2025-06-09 17:25:12,248 [[32mINFO[0m] __main__:    队列状态: 有等待
2025-06-09 17:25:12,250 [[32mINFO[0m] __main__:    并发请求: 190
2025-06-09 17:25:12,250 [[32mINFO[0m] __main__:    GPU缓存: 0.2%
2025-06-09 17:25:12,320 [[31mERROR[0m] __main__: ❌ 迭代错误 (5): operands could not be broadcast together with shapes (10,10) (9,9) 
Traceback (most recent call last):
  File "/home/ldaphome/colin/workplace/vllm_mab/src/main.py", line 238, in run
    linucb_action = self.linucb.select_action(norm_features)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ldaphome/colin/workplace/vllm_mab/src/linucb.py", line 55, in select_action
    A_reg = self.A[a] + self.lambda_reg * np.eye(self.n_features)
            ~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ValueError: operands could not be broadcast together with shapes (10,10) (9,9) 
2025-06-09 17:25:12,321 [[35mCRITICAL[0m] __main__: 连续错误过多，系统退出
